@using XQYC.Business.Entity;
@using HiLand.General.Entity;
@using HiLand.Utility.Data;

@{
    ViewBag.Title = "Home Page";
    HiLand.Framework.BusinessCore.BusinessUser CurrentUser = HiLand.Framework.BusinessCore.BLL.BusinessUserBLL.CurrentUser;

    List<LaborContractEntity> laborDiscontinueContractList = (List<LaborContractEntity>)this.ViewData["laborDiscontinueContractList"];
    int laborDiscontinueCount = (int)this.ViewData["laborDiscontinueCount"];

    List<LaborContractEntity> laborLastContractList = (List<LaborContractEntity>)this.ViewData["laborLastContractList"];
    int laborLastCountCount = (int)this.ViewData["laborLastCountCount"];

    List<LaborEntity> laborLastestList = (List<LaborEntity>)this.ViewData["laborLastestList"];
    int laborRegisterCount = (int)this.ViewData["laborRegisterCount"];

    List<RemindEntity> remindList = (List<RemindEntity>)this.ViewData["remindList"];
    int remindCount = (int)this.ViewData["remindCount"];


    List<EnterpriseJobEntity> enterpriseJobLastList = (List<EnterpriseJobEntity>)this.ViewData["enterpriseJobLastList"];
    int enterpriseJobCount = (int)this.ViewData["enterpriseJobCount"];
}

<div style="margin-bottom: 20px;"></div>

<div class="moduleStyle moduleStyle1">
    <h5>个人信息摘要
    </h5>
    <div>登录账户为：@CurrentUser.UserName</div>
    <div>姓名为：@CurrentUser.UserNameDisplay</div>
    <div>所在部门为：@CurrentUser.Department.DepartmentFullPath</div>
    <div>最近一次的登录时间为：@CurrentUser.UserLastDateTime.ToString()</div>
    <div>最近一次的登录IP为：@CurrentUser.UserLastIP</div>
</div>

<div class="moduleStyle moduleStyle1">
    <h5>最新招工信息(最近一月内录入的招工信息为: @enterpriseJobCount )
    </h5>
    @foreach (EnterpriseJobEntity item in enterpriseJobLastList)
    {
        string stringData = string.Format("【{0}】{1} {2}", item.CreateTime.ToShortDateString(), item.EnterpriseName, item.EnterpriseJobTitle);
        <div><span title="@stringData">@StringHelper.SubString(stringData, 40)</span></div>
    }
</div>


<div class="moduleStyle moduleStyle1">
    <h5>提醒摘要(您共有 @remindCount 条信息未读)
    </h5>
    @foreach (RemindEntity item in remindList)
    {
        string stringData = string.Format("【{0}】{1}", item.CreateDate.ToShortDateString(), item.RemindTitle);
        <div><span title="@stringData">@StringHelper.SubString(stringData, 40)</span></div>
    }
</div>


<div class="moduleStyle moduleStyle1">
    <h5>最新劳务人员信息(最近一月内录入的人数为: @laborRegisterCount)
    </h5>
    @foreach (LaborEntity item in laborLastestList)
    {
        string stringData = string.Format("【{0}】的信息于【{1}】录入系统", item.UserNameCN, item.UserRegisterDate.ToShortDateString());
        <div><span title="@stringData">@StringHelper.SubString(stringData, 40)</span></div>
    }
</div>
<div class="moduleStyle moduleStyle1">
    <h5>最新入职劳务人员信息(最近一月内入职的人数为: @laborLastCountCount)
    </h5>
    @foreach (LaborContractEntity item in laborLastContractList)
    {
        string stringData = string.Format("【{0}】于【{1}】在【{2}】入职", item.Labor.UserNameCN, item.LaborContractStartDate.ToShortDateString(), item.Enterprise.CompanyNameShort);
        <div><span title="@stringData">@StringHelper.SubString(stringData, 40)</span></div>
    }
</div>
<div class="moduleStyle moduleStyle1">
    <h5>最新离职人员信息(最近一月内离职的人数为: @laborDiscontinueCount)
    </h5>
    @foreach (LaborContractEntity item in laborDiscontinueContractList)
    {
        string stringData = string.Format("【{0}】于【{1}】在【{2}】离职", item.Labor.UserNameCN, item.LaborContractDiscontinueDate.ToShortDateString(), item.Enterprise.CompanyNameShort);
        <div><span title="@stringData">@StringHelper.SubString(stringData, 40)</span></div>
    }
</div>
<div class="clear"></div>
<script type="text/javascript">
    $(document).ready(function () {
        $("#aDashboardSection").addClass("current");
    });
</script>
